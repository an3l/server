--echo #
--echo #  Cannot read .frm file from mysql table containg the json data
--echo # (Incorrect information in file: .frm)
--echo #
let $datadir=`select @@datadir`;
--echo $datadir
# this doesn't work $file= '/home/anel/workspace/server/dog.jpg'; 
# let $file= '$MYSQLTEST_VARDIR/tmp/bug53088.txt';
# --remove_file $MYSQLTEST_VARDIR/tmp/bug31663.txt

let $file= '$MYSQLTEST_VARDIR/std_data/dog.jpg'; 
let $length= 50;

create table tblob (photo blob,fint int);
describe tblob;

--eval INSERT INTO tblob(photo) VALUE (LOAD_FILE($file))
--eval INSERT INTO tblob VALUES (REPEAT('.', $length), 335)

# insert into tblob values (LOAD_FILE($file), 245); # doesnt work
select photo from tblob;
select * from tblob;

drop table tblob;

# 1)  At line 8: Path '/test/mysql_json.frm;' is not a subdirectory of MYSQLTEST_VARDIR or MYSQL_TMP_DIR
--copy_file std_data/json.frm $datadir/test/json.frm
--copy_file std_data/json.MYD $datadir/test/json.MYD
--copy_file std_data/json.MYI $datadir/test/json.MYI 

# 2) Can't create/write to file '/home/anel/workspace/server/mysql-test/var/tmp/test/mysql_json.frm' 
# (Errcode: 2 "No such file or directory")# mysqltest: At line 12: command "copy_file" failed with error: 1  my_errno: 2  errno: 2
#--copy_file $MYSQLTEST_VARDIR/std_data/mysql_json.frm  $MYSQL_TMP_DIR/test/mysql_json.frm
#--copy_file $MYSQLTEST_VARDIR/std_data/mysql_json.MYD  $MYSQL_TMP_DIR/mysql_json.MYD

show databases;
use test;
show tables;
show create table test.json;
describe test.json;
select * from test.json;

drop table json;

# Note
# Path '/test/mysql_json.frm;' is not a subdirectory of MYSQLTEST_VARDIR '/home/anel/workspace/server/mysql-test/var'
# (here is folder /std_data with my data in it!)
# or MYSQL_TMP_DIR '/home/anel/workspace/server/mysql-test/var/tmp'
#--copy_file $MYSQLTEST_VARDIR/std_data/t_set.frm $MYSQL_TMP_DIR/data57/test/t_set.frm
